apiVersion: camel.apache.org/v1
kind: Kamelet
metadata:
  name: sftp-source
  labels:
    camel.apache.org/kamelet.type: "source"
spec:
  definition:
    title: "sftp source"
    description: |-
      SFTP Endpoint to pick up files from a directory
    type: object
    properties:
      path:
        title: path
        description: path of component
        type: string
      options:
        title: options (query parameters)
        description: Endpoint URI
        type: string
  dependencies:
    - "camel:kamelet"
  template:
    route:
      from:
        uri: "sftp:{{path}}?{{?options}}&throwExceptionOnConnectFailed=true&bridgeErrorHandler=true&serverHostKeys=ssh-ed25519,ecdsa-sha2-nistp256,ecdsa-sha2-nistp384,ecdsa-sha2-nistp521,rsa-sha2-512,rsa-sha2-256,ssh-rsa&publicKeyAcceptedAlgorithms=ssh-ed25519,ecdsa-sha2-nistp256,ecdsa-sha2-nistp384,ecdsa-sha2-nistp521,rsa-sha2-512,rsa-sha2-256,ssh-rsa&keyExchangeProtocols=curve25519-sha256,curve25519-sha256@libssh.org,ecdh-sha2-nistp256,ecdh-sha2-nistp384,ecdh-sha2-nistp521,diffie-hellman-group-exchange-sha256,diffie-hellman-group16-sha512,diffie-hellman-group18-sha512,diffie-hellman-group14-sha256,diffie-hellman-group1-sha1,diffie-hellman-group14-sha1"
        steps:
          - to:
              uri: "kamelet:sink"